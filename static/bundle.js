!function(){"use strict";function c(t,o){return function(t){if(Array.isArray(t))return t}(t)||function(t,o){var r=[],e=!0,i=!1,n=void 0;try{for(var a,l=t[Symbol.iterator]();!(e=(a=l.next()).done)&&(r.push(a.value),!o||r.length!==o);e=!0);}catch(t){i=!0,n=t}finally{try{e||null==l.return||l.return()}finally{if(i)throw n}}return r}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var u=new Map([["Bakerloo","#B36305"],["Central","#E32017"],["Circle","#FFD300"],["District","#00782A"],["Hammersmith & City","#F3A9BB"],["Jubilee","#A0A5A9"],["Metropolitan","#9B0056"],["Northern","#000000"],["Piccadilly","#003688"],["Victoria","#0098D4"],["Waterloo & City","#95CDBA"],["DLR","#00A4A7"],["London Overground","#EE7C0E"],["Tramlink","#84B817"],["Emirates Air Line","#E21836"],["Crossrail","#7156A5"]]);mapboxgl.accessToken="pk.eyJ1IjoidXJzY2hyZWkiLCJhIjoiY2pubHJsaGZjMWl1dzNrbzM3eDBuNzN3eiJ9.5xEWTiavcSRbv7LYZoAmUg";var d=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v9",zoom:15.5,center:{lng:-.11598344692356477,lat:51.512726521488304},maxBounds:[{lng:-.5533749005341804,lat:51.31536873314653},{lng:.4214032710438005,lat:51.71445426713464}]});d.on("style.load",function(){d.addSource("tubes",{type:"geojson",data:"static/tube_polygons.geojson"});var t=500,o=!0,r=!1,e=void 0;try{for(var i,n=u[Symbol.iterator]();!(o=(i=n.next()).done);o=!0){var a=c(i.value,2),l=a[0],s=a[1];d.addLayer({filter:["==","line_name",l],id:encodeURIComponent(l)+"-extruded",type:"fill-extrusion",source:"tubes",paint:{"fill-extrusion-color":s,"fill-extrusion-base":t,"fill-extrusion-height":t+2,"fill-extrusion-height-transition":{duration:1500,delay:1e3},"fill-extrusion-opacity":.85}}).flyTo({bearing:Math.floor(360*Math.random())+1,pitch:Math.floor(70*Math.random())+50}),t+=10}}catch(t){r=!0,e=t}finally{try{o||null==n.return||n.return()}finally{if(r)throw e}}}),$(document).ready(function(){var t=!0,o=!1,r=void 0;try{for(var e,i=u[Symbol.iterator]();!(t=(e=i.next()).done);t=!0){var n=c(e.value,2),a=n[0],l=n[1];$("#linelist").append('<button type="button" style="background-color: '.concat(l,';"\n                id="').concat(encodeURIComponent(a),'" class="btn btn-outline-light active"\n                aria-pressed="true"><span style="color: #f8f9fa;">').concat(a,"</span></button>"))}}catch(t){o=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(o)throw r}}$(".btn").click(function(){var t=$(this).css("backgroundColor");$(this).button("toggle"),"visible"===d.getLayoutProperty($(this).attr("id")+"-extruded","visibility")?(d.setLayoutProperty($(this).attr("id")+"-extruded","visibility","none"),$(this).css("background-color","#f8f9fa").find(">:first-child").css("color",t)):(d.setLayoutProperty($(this).attr("id")+"-extruded","visibility","visible"),$(this).css("background-color",u.get($(this).text())).find(">:first-child").css("color","#f8f9fa"))}),setTimeout(function(){d.flyTo({zoom:14,speed:.2,curve:1})},3e3)})}();
